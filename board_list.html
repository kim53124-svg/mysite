<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시판 목록</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <!-- Custom styles for this template -->
    <style>
        body { padding-top: 20px; }
        .container { max-width: 960px; }
        .footer { padding: 2.5rem 0; color: #999; text-align: center; }
        .pagination { justify-content: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <span th:text="${email} + '님 환영합니다.'"></span>
            <a th:href="@{/api/logout}">로그아웃</a>
        </div>

        <h2 class="mt-4">게시판 목록</h2>

        <!-- 검색창 -->
        <form th:action="@{/board_list}" method="get" class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" name="keyword" th:value="${keyword}" placeholder="제목 검색">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">검색</button>
        </form>

        <!-- 게시글 리스트 -->
        <table class="table table-striped mt-3">
            <thead>
                <tr>
                    <th></th>
                    <th>제목</th>
                    <th>작성자</th>
                    <th>작성일</th>
                </tr>
            </thead>
                        <tbody>
                            <tr th:each="board : ${boards}">
                                <td th:text="${board.id}"></td>
                                <td>
                                    <!-- 제목 클릭 시 /board_view/{id} 로 이동하는 링크 추가 -->
                                    <a th:href=" @{/board_view/{id}(id=${board.id})}">
                                        <span th:text="${board.title}"></span>
                                    </a>
                                </td>
                                <td th:text="${board.user}"></td>
                                <td th:text="${board.newdate}"></td>
                            </tr>
                        </tbody>
        </table>

        <!-- 글쓰기 버튼 -->
        <div class="mb-3">
            <a th:href="@{/board_write}" class="btn btn-primary">글쓰기</a>
        </div>

        <!-- 페이징 -->
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/board_list(page=${currentPage - 1}, keyword=${keyword})}">Previous</a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/board_list(page=${i}, keyword=${keyword})}" th:text="${i + 1}">1</a>
                </li>
                <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/board_list(page=${currentPage + 1}, keyword=${keyword})}">Next</a>
                </li>
            </ul>
        </nav>

    </div>
</body>
</html>